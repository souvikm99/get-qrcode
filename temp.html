<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Overlay</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        #canvas {
            border: 1px solid #ddd;
            margin-top: 20px;
        }
        #downloadBtn {
            margin-top: 20px;
            display: none; /* Initially hide the download button */
        }
    </style>
</head>
<body>

<h2>Overlay Image on Top of Another</h2>
<input type="file" id="baseImage" accept="image/*">
<input type="file" id="overlayImage" accept="image/*">
<button onclick="drawImages()">Combine Images</button>
<canvas id="canvas"></canvas>
<button id="downloadBtn" onclick="downloadImage()">Download Combined Image</button>

<script>
    function drawImages() {
        const baseImageInput = document.getElementById('baseImage');
        const overlayImageInput = document.getElementById('overlayImage');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const downloadBtn = document.getElementById('downloadBtn');

        // Fixed dimensions for the overlay image
        const fixedWidth = 200; // Example: 100 pixels width
        const fixedHeight = 200; // Example: 100 pixels height

        if (baseImageInput.files.length > 0 && overlayImageInput.files.length > 0) {
            const baseImage = new Image();
            const overlayImage = new Image();

            baseImage.onload = () => {
                canvas.width = baseImage.width;
                canvas.height = baseImage.height;
                ctx.drawImage(baseImage, 0, 0);

                overlayImage.onload = () => {
                    // Calculate center position for the fixed size
                    const x = (baseImage.width - fixedWidth) / 2;
                    const y = (baseImage.height - fixedHeight) / 2;
                    ctx.drawImage(overlayImage, x, y, fixedWidth, fixedHeight); // Draw overlay with fixed size
                    downloadBtn.style.display = 'inline'; // Show the download button after images are loaded
                };
                overlayImage.src = URL.createObjectURL(overlayImageInput.files[0]);
            };
            baseImage.src = URL.createObjectURL(baseImageInput.files[0]);
        } else {
            alert('Please select both images.');
        }
    }

    function downloadImage() {
        const canvas = document.getElementById('canvas');
        const image = canvas.toDataURL("image/png");
        const link = document.createElement('a');
        link.download = 'combined_image.png';
        link.href = image;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
</script>

</body>
</html>
